<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÑ‡∏û‡πà 3 ‡πÉ‡∏ö - ‡∏≠‡∏î‡∏µ‡∏ï ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Prompt', sans-serif;
    }

    .bg-mystic {
      background: radial-gradient(circle at top, #1f1b2e, #0c0a1a);
    }

    .card-pick {
      transition: transform 0.3s;
    }

    .card-pick:hover {
      transform: scale(1.05);
      cursor: pointer;
    }

    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }

    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    @media (max-width: 640px) {
      .question-box {
        height: 100px;
        font-size: 0.875rem;
      }
    }
  </style>
</head>

<body class="bg-mystic text-white min-h-screen p-4">
  <div class="max-w-4xl mx-auto text-center mt-10">
    <h1 class="text-3xl font-bold text-yellow-200 mb-2">üÉè ‡πÑ‡∏û‡πà 3 ‡πÉ‡∏ö</h1>
    <p class="text-purple-200 mb-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà 3 ‡πÉ‡∏ö: ‡∏≠‡∏î‡∏µ‡∏ï ‚Äì ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‚Äì ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</p>
    <p class="text-purple-300 text-sm italic mb-4">* ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà</p>

    <textarea id="questionInput" class="w-full max-w-md mx-auto block p-3 rounded-md text-black mb-6" rows="2"
      placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å ‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô ‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏† ‡∏Ø‡∏•‡∏Ø"></textarea>

    <div class="flex justify-center gap-4 flex-wrap mb-6">
      <div>
        <h2 class="mb-2 font-semibold">‡∏≠‡∏î‡∏µ‡∏ï</h2>
        <div id="slot-past" class="h-32 w-20 mx-auto flex items-center justify-center text-gray-500 italic text-sm">
          ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
      </div>
      <div>
        <h2 class="mb-2 font-semibold">‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h2>
        <div id="slot-present" class="h-32 w-20 mx-auto flex items-center justify-center text-gray-500 italic text-sm">
          ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
      </div>
      <div>
        <h2 class="mb-2 font-semibold">‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï</h2>
        <div id="slot-future" class="h-32 w-20 mx-auto flex items-center justify-center text-gray-500 italic text-sm">
          ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
      </div>
    </div>

    <p class="text-purple-300 mb-2">‡πÅ‡∏ï‡∏∞‡πÑ‡∏û‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</p>
    <div class="text-sm text-yellow-300 mb-6">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡∏π‡πà: <span id="currentSelect"
        class="font-bold">‡∏≠‡∏î‡∏µ‡∏ï</span></div>

    <!-- ‡πÑ‡∏û‡πà‡∏ã‡πâ‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô -->
    <div class="flex flex-col items-center gap-4 mb-6">
      <div id="row1" class="flex justify-center relative h-24 w-full overflow-x-auto scrollbar-hide"></div>
      <div id="row2" class="flex justify-center relative h-24 w-full overflow-x-auto scrollbar-hide"></div>
      <div id="row3" class="flex justify-center relative h-24 w-full overflow-x-auto scrollbar-hide"></div>

      <button onclick="revealCards()"
        class="bg-yellow-500 hover:bg-yellow-600 text-black font-semibold py-2 px-6 rounded-xl transition">
        üîÆ ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÑ‡∏û‡πà
      </button>
    </div>

    <script>
      // const totalCards = 78;
      // const selected = {};
      // const revealed = {};
      // let selectingSlot = "past";

      // const cardBackSrc = "images/card-back.png";
      // const row1 = document.getElementById("row1");
      // const row2 = document.getElementById("row2");
      // const row3 = document.getElementById("row3");


      // for (let i = 0; i < totalCards; i++) {
      //   const img = document.createElement("img");
      //   img.src = cardBackSrc;
      //   img.className = "w-12 h-24 card-pick ml-[-35px]";
      //   img.dataset.index = i;
      //   img.onclick = () => selectCard(i, img);


      //   if (window.innerWidth < 640) {
      //     if (i < 26
      //     ) {
      //       row1.appendChild(img);
      //     } else if (i < 52) {
      //       row2.appendChild(img);             
      //     } else {
      //       row3.appendChild(img);
      //     }
      //   } else {
      //     if (i < 39) {
      //       row1.appendChild(img);
      //     } else {
      //       row2.appendChild(img);
      //     }
      //   }
      // }

      // function selectCard(index, cardEl) {
      //   const question = document.getElementById("questionInput").value.trim();
      //   if (!question) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà");
      //   if (Object.keys(selected).length >= 3) return;
      //   if (Object.values(selected).some(card => card.index === index)) return;

      //   const isReversed = Math.random() < 0.5;
      //   const slot = document.getElementById("slot-" + selectingSlot);
      //   slot.innerHTML = "";

      //   const img = document.createElement("img");
      //   img.src = cardBackSrc;
      //   img.className = "h-full object-contain transition";
      //   slot.appendChild(img);

      //   selected[selectingSlot] = { index, isReversed, element: img };
      //   revealed[selectingSlot] = false;

      //   cardEl.remove();

      //   if (selectingSlot === "past") selectingSlot = "present";
      //   else if (selectingSlot === "present") selectingSlot = "future";

      //   updateCurrentSlot();
      // }

      // function revealCards() {
      //   for (const slotKey of ["past", "present", "future"]) {
      //     const data = selected[slotKey];
      //     if (!data || revealed[slotKey]) continue;

      //     const { index, isReversed, element } = data;
      //     element.src = `images/rws_${String(index).padStart(2, '0')}.png`;
      //     element.style.transform = isReversed ? "rotate(180deg)" : "rotate(0deg)";
      //     revealed[slotKey] = true;
      //   }
      // }

      // function updateCurrentSlot() {
      //   const map = { past: "‡∏≠‡∏î‡∏µ‡∏ï", present: "‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô", future: "‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï" };
      //   document.getElementById("currentSelect").textContent = map[selectingSlot];
      // }
      const totalCards = 78;
      const selected = {};
      const revealed = {};
      let selectingSlot = "past";

      const cardBackSrc = "images/card-back.png";
      const row1 = document.getElementById("row1");
      const row2 = document.getElementById("row2");
      const row3 = document.getElementById("row3");

      // üîÅ ‚úÖ ‡πÅ‡∏ö‡πà‡∏á‡πÑ‡∏û‡πà‡πÅ‡∏ñ‡∏ß‡∏•‡∏∞ 26 ‡πÉ‡∏ö‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
      const perRow = 26;
      const rows = [row1, row2, row3];

      for (let i = 0; i < totalCards; i++) {
        const img = document.createElement("img");
        img.src = cardBackSrc;
        img.className = "w-12 h-24 card-pick";
        if (i % 26 !== 0) img.classList.add("ml-[-35px]");
        img.dataset.index = i;
        img.onclick = () => selectCard(i, img);

        const targetRow = rows[Math.floor(i / perRow)];
        targetRow.appendChild(img);
      }

      function selectCard(index, cardEl) {
        const question = document.getElementById("questionInput").value.trim();
        if (!question) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏û‡πà");
        if (Object.keys(selected).length >= 3) return;
        if (Object.values(selected).some(card => card.index === index)) return;

        const isReversed = Math.random() < 0.5;
        const slot = document.getElementById("slot-" + selectingSlot);
        slot.innerHTML = "";

        const img = document.createElement("img");
        img.src = cardBackSrc;
        img.className = "h-full object-contain transition";
        slot.appendChild(img);

        selected[selectingSlot] = { index, isReversed, element: img };
        revealed[selectingSlot] = false;

        cardEl.remove();

        if (selectingSlot === "past") selectingSlot = "present";
        else if (selectingSlot === "present") selectingSlot = "future";

        updateCurrentSlot();
      }

      function revealCards() {
        for (const slotKey of ["past", "present", "future"]) {
          const data = selected[slotKey];
          if (!data || revealed[slotKey]) continue;

          const { index, isReversed, element } = data;
          element.src = `images/rws_${String(index).padStart(2, '0')}.png`;
          element.style.transform = isReversed ? "rotate(180deg)" : "rotate(0deg)";
          revealed[slotKey] = true;
        }
      }

      function updateCurrentSlot() {
        const map = { past: "‡∏≠‡∏î‡∏µ‡∏ï", present: "‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô", future: "‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï" };
        document.getElementById("currentSelect").textContent = map[selectingSlot];
      }
    </script>
</body>

</html>
